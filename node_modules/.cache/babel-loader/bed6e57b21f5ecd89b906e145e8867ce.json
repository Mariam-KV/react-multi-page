{"ast":null,"code":"import _slicedToArray from\"C:/Users/marik/Desktop/react-multi-page/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useCallback,useEffect}from\"react\";import useHttp from\"../../hooks/use-http\";import LoadingSpinner from\"../UI/LoadingSpinner\";import{getAllComments}from\"../../lib/api\";import classes from\"./Comments.module.css\";import NewCommentForm from\"./NewCommentForm\";import CommentList from\"./CommentsList\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Comments=function Comments(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isAddingComment=_useState2[0],setIsAddingComment=_useState2[1];var _useHttp=useHttp(getAllComments,true),sendRequest=_useHttp.sendRequest,data=_useHttp.data,error=_useHttp.error,status=_useHttp.status;var startAddCommentHandler=function startAddCommentHandler(){setIsAddingComment(true);};var id=props.id;useEffect(function(){sendRequest(id);},[sendRequest,id]);var handleAddComments=useCallback(function(){sendRequest(id);setIsAddingComment(false);},[sendRequest,id]);if(status===\"pending\"){return/*#__PURE__*/_jsx(\"div\",{className:\"centered\",children:/*#__PURE__*/_jsx(LoadingSpinner,{})});}if(error){return/*#__PURE__*/_jsx(\"p\",{className:\"centered focused\",children:error});}//if (status === \"completed\" && !data.commentData) {\n//return <p className=\"centered\">No comments found</p>;\n//}\nreturn/*#__PURE__*/_jsxs(\"section\",{className:classes.comments,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"User Comments\"}),!isAddingComment&&/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:startAddCommentHandler,children:\"Add a Comment\"}),isAddingComment&&/*#__PURE__*/_jsx(NewCommentForm,{id:id,onAddedComment:handleAddComments}),/*#__PURE__*/_jsx(\"div\",{children:data.length!==0?/*#__PURE__*/_jsx(CommentList,{comments:data}):/*#__PURE__*/_jsx(\"p\",{className:\"centered\",children:\"No comments were addded yet!\"})})]});};export default Comments;","map":{"version":3,"names":["useState","useCallback","useEffect","useHttp","LoadingSpinner","getAllComments","classes","NewCommentForm","CommentList","Comments","props","isAddingComment","setIsAddingComment","sendRequest","data","error","status","startAddCommentHandler","id","handleAddComments","comments","length"],"sources":["C:/Users/marik/Desktop/react-multi-page/src/components/comments/Comments.js"],"sourcesContent":["import { useState, useCallback, useEffect } from \"react\";\nimport useHttp from \"../../hooks/use-http\";\nimport LoadingSpinner from \"../UI/LoadingSpinner\";\nimport { getAllComments } from \"../../lib/api\";\nimport classes from \"./Comments.module.css\";\nimport NewCommentForm from \"./NewCommentForm\";\nimport CommentList from \"./CommentsList\";\n\nconst Comments = (props) => {\n  const [isAddingComment, setIsAddingComment] = useState(false);\n  let { sendRequest, data, error, status } = useHttp(getAllComments, true);\n  const startAddCommentHandler = () => {\n    setIsAddingComment(true);\n  };\n  let id = props.id;\n  useEffect(() => {\n    sendRequest(id);\n  }, [sendRequest, id]);\n  let handleAddComments = useCallback(() => {\n    sendRequest(id);\n    setIsAddingComment(false);\n  }, [sendRequest, id]);\n  if (status === \"pending\") {\n    return (\n      <div className=\"centered\">\n        <LoadingSpinner />\n      </div>\n    );\n  }\n\n  if (error) {\n    return <p className=\"centered focused\">{error}</p>;\n  }\n\n  //if (status === \"completed\" && !data.commentData) {\n  //return <p className=\"centered\">No comments found</p>;\n  //}\n  return (\n    <section className={classes.comments}>\n      <h2>User Comments</h2>\n      {!isAddingComment && (\n        <button className=\"btn\" onClick={startAddCommentHandler}>\n          Add a Comment\n        </button>\n      )}\n\n      {isAddingComment && (\n        <NewCommentForm id={id} onAddedComment={handleAddComments} />\n      )}\n      <div>\n        {data.length !== 0 ? (\n          <CommentList comments={data} />\n        ) : (\n          <p className=\"centered\">No comments were addded yet!</p>\n        )}\n      </div>\n    </section>\n  );\n};\n\nexport default Comments;\n"],"mappings":"6HAAA,OAASA,QAAQ,CAAEC,WAAW,CAAEC,SAAS,KAAQ,OAAO,CACxD,MAAOC,QAAO,KAAM,sBAAsB,CAC1C,MAAOC,eAAc,KAAM,sBAAsB,CACjD,OAASC,cAAc,KAAQ,eAAe,CAC9C,MAAOC,QAAO,KAAM,uBAAuB,CAC3C,MAAOC,eAAc,KAAM,kBAAkB,CAC7C,MAAOC,YAAW,KAAM,gBAAgB,CAAC,wFAEzC,GAAMC,SAAQ,CAAG,QAAXA,SAAQ,CAAIC,KAAK,CAAK,CAC1B,cAA8CV,QAAQ,CAAC,KAAK,CAAC,wCAAtDW,eAAe,eAAEC,kBAAkB,eAC1C,aAA2CT,OAAO,CAACE,cAAc,CAAE,IAAI,CAAC,CAAlEQ,WAAW,UAAXA,WAAW,CAAEC,IAAI,UAAJA,IAAI,CAAEC,KAAK,UAALA,KAAK,CAAEC,MAAM,UAANA,MAAM,CACtC,GAAMC,uBAAsB,CAAG,QAAzBA,uBAAsB,EAAS,CACnCL,kBAAkB,CAAC,IAAI,CAAC,CAC1B,CAAC,CACD,GAAIM,GAAE,CAAGR,KAAK,CAACQ,EAAE,CACjBhB,SAAS,CAAC,UAAM,CACdW,WAAW,CAACK,EAAE,CAAC,CACjB,CAAC,CAAE,CAACL,WAAW,CAAEK,EAAE,CAAC,CAAC,CACrB,GAAIC,kBAAiB,CAAGlB,WAAW,CAAC,UAAM,CACxCY,WAAW,CAACK,EAAE,CAAC,CACfN,kBAAkB,CAAC,KAAK,CAAC,CAC3B,CAAC,CAAE,CAACC,WAAW,CAAEK,EAAE,CAAC,CAAC,CACrB,GAAIF,MAAM,GAAK,SAAS,CAAE,CACxB,mBACE,YAAK,SAAS,CAAC,UAAU,uBACvB,KAAC,cAAc,IAAG,EACd,CAEV,CAEA,GAAID,KAAK,CAAE,CACT,mBAAO,UAAG,SAAS,CAAC,kBAAkB,UAAEA,KAAK,EAAK,CACpD,CAEA;AACA;AACA;AACA,mBACE,iBAAS,SAAS,CAAET,OAAO,CAACc,QAAS,wBACnC,qCAAsB,CACrB,CAACT,eAAe,eACf,eAAQ,SAAS,CAAC,KAAK,CAAC,OAAO,CAAEM,sBAAuB,2BAGzD,CAEAN,eAAe,eACd,KAAC,cAAc,EAAC,EAAE,CAAEO,EAAG,CAAC,cAAc,CAAEC,iBAAkB,EAC3D,cACD,qBACGL,IAAI,CAACO,MAAM,GAAK,CAAC,cAChB,KAAC,WAAW,EAAC,QAAQ,CAAEP,IAAK,EAAG,cAE/B,UAAG,SAAS,CAAC,UAAU,0CACxB,EACG,GACE,CAEd,CAAC,CAED,cAAeL,SAAQ"},"metadata":{},"sourceType":"module"}